services:
  backend:
    build: .
    container_name: sr-mendes-backend
    restart: always
    ports:
      - "3001:3000"
    environment:
      JWT_SECRET: "sua_chave_secreta"
      ADMIN_USER: "adminbm"
      ADMIN_PASS: "belmasc2026"
    volumes:
      # Trocamos o ./database_data por um Volume Nomeado
      - dados_barbearia:/app/database
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.srmendes.rule=Host(`api.unvgroup.tech`)"
      - "traefik.http.routers.srmendes.entrypoints=websecure"
      - "traefik.http.routers.srmendes.tls.certresolver=myresolver"

# ADICIONE ESTE BLOCO NO FINAL DO ARQUIVO (colado no canto esquerdo, sem espa√ßos antes)
volumes:
  dados_barbearia:
